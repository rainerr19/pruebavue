{"remainingRequest":"C:\\xampp\\htdocs\\pruebavue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\pruebavue\\src\\components\\tablaBoleta.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\pruebavue\\src\\components\\tablaBoleta.vue","mtime":1613660731985},{"path":"C:\\xampp\\htdocs\\pruebavue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pruebavue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pruebavue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\pruebavue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgoKZXhwb3J0IGRlZmF1bHQgewogIC8vIHByb3BzOnthY3R1YWxpemE6RnVuY3Rpb259LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgICBhbGVydHZhcmlhbnQ6Indhcm5pbmciLAogICAgICBkaXNtaXNzU2VjczogNSwKICAgICAgbWVuc2FqZTonJywKICAgICAgZGlzbWlzc0NvdW50RG93bjogMCwKICAgICAgYm9sZXRhczpbIF0sCiAgICAgIGlkX2JvbGV0YTonJywKICAgICAgY2VkdWxhOicnfTsKICB9LAogbWV0aG9kczp7CiAgIG1vZGFsX2JvbGV0YShpZCl7CiAgICAgIHRoaXMuJHJlZnNbJ2FncmVnYXInXS5zaG93KCk7CiAgICAgdGhpcy5pZF9ib2xldGEgPSBpZDsKICAgfSwKICAgICAKICAgZGVsZXRlX2V2ZW50byhpZF9iKXsKICAgICAgICAgICAgYXhpb3MuZGVsZXRlKCdodHRwOi8vbG9jYWxob3N0L3BydWViYWxhcmF2ZWwvcHVibGljL2FwaS9ib2xldGEvZWxpbWluYXIvJytpZF9iKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgIC8vICB0aGlzLiRyZWZzWydhZ3JlZ2FyJ10uaGlkZSgpCiAgICAgICAgICAgICAgLy8gZWxpbWluYXIKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PSAnbm8gZW5jb250cmFkbycpIHsKICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0dmFyaWFudD0nZGFuZ2VyJzsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoJ2JvbGV0YSBubyBlbmNvbnRyYWRhJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgdGhpcy5hbGVydHZhcmlhbnQ9J3N1Y2Nlc3MnOwogICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoJ0V2ZW50byBFbGltaW5hZG8nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5tb3N0cmFyKCk7CiAgICAgICAgfSk7CgogICAgICAgICAgfSwKICAgYWdyZWdhcihpZF9iKXsKICAgICBjb25zdCBkYXRvcyA9IHtjZWR1bGE6dGhpcy5jZWR1bGF9OwogICAgICAgICAgICBheGlvcy5wdXQoJ2h0dHA6Ly9sb2NhbGhvc3QvcHJ1ZWJhbGFyYXZlbC9wdWJsaWMvYXBpL2JvbGV0YS9hc2lnbmFyLycraWRfYixkYXRvcykudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAvLyAgdGhpcy4kcmVmc1snYWdyZWdhciddLmhpZGUoKQogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1snYWdyZWdhciddLmhpZGUoKTsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSA9PT0gJ2NvbXByYWRvcicpIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxlcnR2YXJpYW50PSd3YXJuaW5nJzsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoJ0NsaWVudGUgbm8gcmVnaXN0cmFkbycpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhID09PSAnYm9sZXRhJykgewogICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0dmFyaWFudD0nZGFuZ2VyJzsKICAgICAgICAgICAgICAgICAgdGhpcy5zaG93QWxlcnQoJ2JvbGV0YSBubyBlbmNvbnRyYWRhJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxlcnR2YXJpYW50PSdzdWNjZXNzJzsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0FsZXJ0KCdib2xldGEgYXNpZ25hZGEnKTsKICAgICAgICAgICAgICAgIHRoaXMuY2VkdWxhID0gJyc7CiAgICAgICAgICAgICAgICAgdGhpcy5tb3N0cmFyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAgIH0sCiAgICBhc3luYyBtb3N0cmFyKCkKICAgICAgewogICAgICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0L3BydWViYWxhcmF2ZWwvcHVibGljL2FwaS9ib2xldGEnKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICB0aGlzLmJvbGV0YXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pOwogICAgICB9LCBjb3VudERvd25DaGFuZ2VkKGRpc21pc3NDb3VudERvd24pIHsKICAgICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSBkaXNtaXNzQ291bnREb3duOwogICAgICB9LAogICAgICBzaG93QWxlcnQobWVuc2FqZSkgewogICAgICAgIHRoaXMubWVuc2FqZSA9IG1lbnNhamU7CiAgICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gdGhpcy5kaXNtaXNzU2VjczsKICAgICAgfQoKICAgIH0sCiAgICBjcmVhdGVkICgpewogICAgICB0aGlzLm1vc3RyYXIoKTsKICAgIH0KICAgIAogIH0K"},{"version":3,"sources":["tablaBoleta.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"tablaBoleta.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div class=\"card\">\n  <div class=\"container-fluid\">\n   <b-alert\n      :show=\"dismissCountDown\"\n      dismissible\n     :variant=\"alertvariant\"\n      @dismissed=\"dismissCountDown=0\"\n      @dismiss-count-down=\"countDownChanged\"\n    > {{ mensaje }}\n    </b-alert>\n          <table class=\"table table-striped table-bordered\">\n              <thead class=\"thead-dark\">\n              <tr>\n                  <th> Nombre evento </th>\n                  <th> Descripción </th>\n                  <th> Limite</th>\n                  <th> Asignados </th>\n                  <th> Fecha de cierre </th>\n                  <th> Acciones </th>\n              </tr>\n              </thead>\n              <tbody>\n                  <tr v-for=\"boleta in boletas\" :key=\"boleta.id\">\n                      <td>{{boleta.nombre_evento}}</td>\n\n                  <td> {{boleta.descrip}} </td>\n                  <td> {{boleta.limite}} </td>\n                  <td> {{boleta.asignados}} </td>\n                  <td> {{boleta.fecha_cierre}} </td>\n                  \n                  <td> <button class=\"btn btn-info text-white m-1\"  data-toggle=\"modal\" data-target=\"#agregar\"\n                   @click=\"modal_boleta(boleta.id)\">Asignar boleta</button> \n                      <button class=\"btn btn-danger text-white m-1\"\n                   @click=\"delete_evento(boleta.id)\">Eliminar Evento</button>\n                   </td>\n                  </tr>\n              </tbody>\n          </table>\n         <b-modal ref=\"agregar\" hide-footer >\n          <template #modal-title>\n            Asignar boleta\n          </template>\n          <form action=\"\" v-on:submit.prevent=\"agregar(id_boleta)\">\n            \n            <div class=\"form-group\">\n                <label for=\"recipient-name\" class=\"col-form-label\">Cédula de cliente:</label>\n                <input type=\"number\" class=\"form-control\" v-model=\"cedula\" required>\n            </div>\n            <button type=\"submit\" class=\"btn btn-primary\">Guardar</button>\n          </form>                  \n          </b-modal >\n\n  </div>\n\n</div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\n\nexport default {\n  // props:{actualiza:Function},\n  data(){\n    return {\n       alertvariant:\"warning\",\n      dismissSecs: 5,\n      mensaje:'',\n      dismissCountDown: 0,\n      boletas:[ ],\n      id_boleta:'',\n      cedula:''};\n  },\n methods:{\n   modal_boleta(id){\n      this.$refs['agregar'].show();\n     this.id_boleta = id;\n   },\n     \n   delete_evento(id_b){\n            axios.delete('http://localhost/pruebalaravel/public/api/boleta/eliminar/'+id_b).then((response) => {\n              //  this.$refs['agregar'].hide()\n              // eliminar\n              if (response.data == 'no encontrado') {\n                 this.alertvariant='danger';\n                  this.showAlert('boleta no encontrada');\n              } else {\n                console.log(response.data);\n                this.alertvariant='success';\n                this.showAlert('Evento Eliminado');\n              }\n              this.mostrar();\n        });\n\n          },\n   agregar(id_b){\n     const datos = {cedula:this.cedula};\n            axios.put('http://localhost/pruebalaravel/public/api/boleta/asignar/'+id_b,datos).then((response) => {\n              //  this.$refs['agregar'].hide()\n                this.$refs['agregar'].hide();\n              if (response.data === 'comprador') {\n                this.alertvariant='warning';\n                  this.showAlert('Cliente no registrado');\n                } else if (response.data === 'boleta') {\n                  this.alertvariant='danger';\n                  this.showAlert('boleta no encontrada');\n              } else {\n                this.alertvariant='success';\n                this.showAlert('boleta asignada');\n                this.cedula = '';\n                 this.mostrar();\n              }\n        });\n\n          },\n    async mostrar()\n      {\n          axios.get('http://localhost/pruebalaravel/public/api/boleta').then((response) => {\n            this.boletas = response.data;\n        });\n      }, countDownChanged(dismissCountDown) {\n        this.dismissCountDown = dismissCountDown;\n      },\n      showAlert(mensaje) {\n        this.mensaje = mensaje;\n        this.dismissCountDown = this.dismissSecs;\n      }\n\n    },\n    created (){\n      this.mostrar();\n    }\n    \n  }\n</script>\n\n"]}]}